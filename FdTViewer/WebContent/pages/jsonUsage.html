<html>
	<head>
		<title>Perdincibacco, come funziona l'interfaccia JSON del FdT ?</title>
		<style type="text/css">
			dl {
				font-family: monospace;
			}
			dl dt {
				font-weight: bold;
			}
			dd {
				margin-bottom: 1.5em;
			}
			p.u {
				margin: .3em 0em .3em 0em;
				text-decoration: underline;
			}
			span.param {
				font-style: italic;
			}
		</style>
	</head>
	<body>
		<h1>Perdincibacco, come funziona l'interfaccia JSON del FdT ?</h1>
		L'URL ha la forma <a href="?action=azione">?action=<i>azione</i></a>, dove il valore di <i>azione</i> pu&ograve; essere uno dei seguenti:
		<dl>
			<dt>getQuotes</dt>
			<dd>Tutte le frasi famose di un autore<br/>
				<p class="u">Parametri:</p>
				<ul>
					<li><span class="param">nick</span>: Nick dell'utente.
                    <li><span class="param">pageSize</span>: Numero di frasi famose per pagina. Default 25, massimo 100
                    <li><span class="param">page</span>: Pagina, la numerazione inizia da zero
				</ul>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getQuotes&nick=Giambo">?action=getQuotes&amp;nick=Giambo</a>
				</ul>
			</dd>

			<dt>getEmos</dt>
			<dd>Tutte le faccine (Serie classica e serie estesa), codificate Base64<br/>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getEmos">?action=getEmos</a>
				</ul>
			</dd>

			<dt>getForums</dt>
			<dd>Lista di tutti i forums<br/>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getForums">?action=getForums</a>
				</ul>
			</dd>

			<dt>getAuthor</dt>
			<dd>Informazioni su un utente<br/>
				<p class="u">Parametri:</p>
				<ul>
					<li><span class="param">nick</span>: Nick dell'utente. Obbligatorio
				</ul>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getAuthor&nick=Giambo">?action=getAuthor&amp;nick=Giambo</a>
				</ul>
			</dd>

			<dt>getAuthors</dt>
			<dd>Lista di tutti gli utenti<br/>
				<p class="u">Parametri:</p>
				<ul>
					<li><span class="param">onlyActive</span>: Se "true" allora mostra solo gli utenti attivi (Con una password).
                    <li><span class="param">pageSize</span>: Numero di utenti per pagina. Default 25, massimo 100
                    <li><span class="param">page</span>: Pagina, la numerazione inizia da zero
				</ul>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getAuthors">?action=getAuthors</a>
					<li><a href="?action=getAuthors&onlyActive=true">?action=getAuthors&amp;onlyActive=true</a>
				</ul>
			</dd>

			<dt>getThread</dt>
			<dd>Tutti i messaggi di un thread<br/>
				<p class="u">Parametri:</p>
				<ul>
					<li><span class="param">threadId</span>: Id del thread. Obbligatorio
				</ul>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getThread&threadId=2710439">?action=getThread&amp;threadId=2710439</a>
				</ul>
			</dd>

			<dt>getThreads</dt>
			<dd>Threads, ordinati cronologicamente per data di creazione<br/>
				<p class="u">Parametri:</p>
				<ul>
					<li><span class="param">pageSize</span>: Numero di threads per pagina. Default 25, massimo 100
					<li><span class="param">page</span>: Pagina, la numerazione inizia da zero
					<li><span class="param">forum</span>: Nome del forum. Se il parametro non e' definito, tutto il forum, se e' vuoto solo il forum principale.
				</ul>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getThreads">?action=getThreads</a>: Ultimi 25 threads
					<li><a href="?action=getThreads&pageSize=10">?action=getThreads&amp;pageSize=10</a>: Ultimi 10 threads
					<li><a href="?action=getThreads&pageSize=10&page=5&forum=Sesso">?action=getThreads&amp;pageSize=10&amp;page=5&amp;forum=Sesso</a>: Del forum "Sesso", mostra i 10 treads della quinta pagina (51-60)
				</ul>
			</dd>

			<dt>getMessage</dt>
			<dd>Singolo messaggio<br/>
				<p class="u">Parametri:</p>
				<ul>
					<li><span class="param">msgId</span>: Id del messaggio. Obbligatorio
				</ul>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getMessage&msgId=2710439">?action=getMessage&amp;msgId=2710439</a>
				</ul>
			</dd>

			<dt>getMessages</dt>
			<dd>Messaggi, ordinati cronologicamente<br/>
				<p class="u">Parametri:</p>
				<ul>
					<li><span class="param">pageSize</span>: Numero di messaggi per pagina. Default 25, massimo 100
					<li><span class="param">page</span>: Pagina, la numerazione inizia da zero
					<li><span class="param">forum</span>: Nome del forum. Se il parametro non e' definito, tutto il forum, se e' vuoto solo il forum principale.
					<li><span class="param">nick</span>: Nick dell'utente.
				</ul>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getMessages">?action=getMessages</a>: Ultimi 25 messaggi
					<li><a href="?action=getMessages&pageSize=10">?action=getMessages&amp;pageSize=10</a>: Ultimi 10 messaggi
					<li><a href="?action=getMessages&pageSize=10&page=5&forum=Sesso">?action=getMessages&amp;pageSize=10&amp;page=5&amp;forum=Sesso</a>: Del forum "Sesso", mostra i 10 messaggi della quinta pagina (51-60)
				</ul>
			</dd>

			<dt>getLastId</dt>
			<dd>Id dell'ultimo messaggio inserito.<br/>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getLastId">?action=getLastId</a></li>
				</ul>
			</dd>


			<dt>addMessage</dt>
			<dd>Inserisce un messaggio.<br/>
				<p class="u">Parametri:</p>
				<ul>
					<li><span class="param">nick</span>: Nome dell'utente. Obbligatorio
					<li><span class="param">password</span>: Password. Obbligatorio
					<li><span class="param">anonymous</span>: Se non e' vuoto, il messaggio viene postato come anonimo.
					<li><span class="param">subject</span>: Soggetto, minimo 3 caratteri e massimo 40 caratteri. Obbligatorio
					<li><span class="param">text</span>: Corpo del messaggio, minimo 5 caratteri e massimo 40000. Obbligatorio
					<li><span class="param">forum</span>: Forum nel quale inserire il messaggio. Vedi sotto
					<li><span class="param">type</span>: Tipo di inserimento. Obbligatorio. Puo' prendere i seguenti valori:
					<ul>
						<li><span class="param">new</span>: Nuovo messaggio, il parametro <span class="param">forum</span> e' obbligatorio.
						<li><span class="param">edit</span>: Edit di un mesagggio, il parametro <span class="param">msgId</span> che identifica il messaggio editato e' obbligatorio.
						<li><span class="param">quote</span>: Quota di messaggio, il parametro <span class="param">msgId</span> che identifica il messaggio quotato e' obbligatorio.
						<li><span class="param">reply</span>: Risposta ad un messaggio, il parametro <span class="param">msgId</span> che identifica il messaggio al quale si risponde e' obbligatorio.
					</ul>
				</ul>
				<p class="u">Esempi:</p>
				<ul>
					<li><a href="?action=getLastId">?action=getLastId</a></li>
				</ul>
			</dd>
		</dl>
		Tutte le <i>azioni</i> supportano il parametro "callback", necessario per bypassare la "same origin policy" (JSONP).
	</body>
</html>